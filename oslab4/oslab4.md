# 实验问题
### 问题一：说明真实操作系统中提供的并发进程同步机制是怎样实现和解决同步问题的
- 在真实操作系统中，内核提供了多种同步原语，如信号量、互斥锁、条件变量等。这些机制本质上都是通过原子操作和进程调度来实现的。在实验中，当多个生产者/消费者或抽烟者进程并发执行时，如果没有同步机制，就会出现竞态条件。比如生产者可能覆盖未被消费的数据，或者抽烟者拿到不完整的材料组合。操作系统通过信号量等机制，在内核层面维护共享资源的状态，并控制进程的阻塞和唤醒，从而解决这些问题。
### 问题二：如何应用操作系统教材中讲解的进程同步原理？
- 生产者-消费者完美应用了教材中的缓冲区管理模型：使用mutex信号量保证对缓冲区的互斥访问；empty和full分别控制空槽位和已填充槽位；生产者先检查empty，消费者先检查full，确保不会越界操作
- 抽烟者则使用多个信号量分别对应不同抽烟者的需求；通过额外的控制变量实现轮流供应；供应者和抽烟者之间形成明确的等待-通知关系
### 问题三：说明信号灯机制是怎样完成进程的互斥和同步的
- 信号量本质上是一个计数器加等待队列
- 互斥实现：二进制信号量(初值1)通过P/V操作包围临界区，P操作尝试获取锁，若计数器为0则阻塞，V操作释放锁，唤醒等待进程
- 同步实现：计数信号量记录资源数量，生产者V操作增加资源计数，消费者P操作减少资源计数
### 问题四：信号量的初值和其值的变化的物理意义是什么
- 初值表示初始可用资源数，P操作使信号量减1，代表占用资源；V操作使信号量加1，代表释放资源；当值为负时，其绝对值表示等待进程数
# 实验测试
### 一：生产优先场景
- 实验设置：先运行四个生产者，再运行四个消费者，都在速率1条件下运行
- 结果如下图
![alt text](/images/502de404bfb854b067f80ccc97a351f.png)
![alt text](/images/60b5c4c2376f0aa40c7676f49a34b50.png)
- 结果分析：首先运行生产者，当缓冲区满时停止，直到运行消费者缓冲区出现空闲位置才继续运行，能满足同步要求
### 二：消费优先场景
- 实验设置：先运行四个消费者，再运行四个生产者，都在速率1条件下运行
- 结果如下图
![alt text](/images/0b4f2282fcf22f78666b85ee15014f0.png)
![alt text](/images/de695fdb0552aa9bc949c7725009618.png)
- 结果分析：首先运行消费者，因为缓冲区无物品，所以阻塞。当运行producer，缓冲区有物品，于是consumer不再阻塞，能满足同步要求
### 三：消费者速度快于生产者
- 实验设置：消费者速度为2，生产者为1，分别两个进程，几乎同时运行
- 结果如下图
![alt text](/images/08ddcdd94065b37136044dfdc0bdf72.png)
- 结果分析：缓冲区趋向于空，有时候消费者明显停滞
### 四：生产者速度快于消费者
- 实验设置：消费者速度为1，生产者为2，分别两个进程，几乎同时运行
- 结果如下图
![alt text](/images/265833f576ab6fc6fdb739accb4d01b.png)
- 结果分析：缓冲区趋向于满，有时候生产者明显停滞，能满足同步要求
